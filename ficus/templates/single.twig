{% extends "base.twig" %}

{% block content %}
    <article class="single-post container mx-auto px-4 py-8">
        {# Header articolo #}
        <header class="mb-8">
            {% if post.thumbnail %}
                <div class="mb-6">
                    <img 
                        src="{{ post.thumbnail.src }}" 
                        alt="{{ post.thumbnail.alt }}"
                        class="w-full h-64 md:h-96 object-cover rounded-lg"
                    >
                </div>
            {% endif %}

            <h1 class="text-4xl font-bold mb-4">{{ post.title }}</h1>

            <div class="flex items-center text-gray-600 mb-4">
                {# Meta info #}
                <time datetime="{{ post.date|date('c') }}">
                    {{ post.date|date('j F Y') }}
                </time>
                <span class="mx-2">•</span>
                <span>{{ t.general.by }} {{ post.author.name }}</span>
                {% if post.categories %}
                    <span class="mx-2">•</span>
                    <span>{{ post.categories|join(', ') }}</span>
                {% endif %}
            </div>
        </header>

        {# Contenuto #}
        <div class="prose max-w-none mb-8">
            {{ post.content|raw }}
        </div>

        {# Tags #}
        {% if post.tags %}
            <div class="border-t border-b border-gray-200 py-4 my-8">
                <div class="flex flex-wrap gap-2">
                    {% for tag in post.tags %}
                        <a href="{{ tag.link }}" class="px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-full text-sm">
                            #{{ tag.name }}
                        </a>
                    {% endfor %}
                </div>
            </div>
        {% endif %}

        {# Navigazione post #}
        <nav class="flex justify-between mt-8 pt-8 border-t border-gray-200">
            {% if post.prev %}
                <a href="{{ post.prev.link }}" class="group flex items-center">
                    <span class="mr-2">PREV</span>
                    <span class="group-hover:underline">{{ post.prev.title }}</span>
                </a>
            {% endif %}

            {% if post.next %}
                <a href="{{ post.next.link }}" class="group flex items-center ml-auto">
                    <span class="group-hover:underline">{{ post.next.title }}</span>
                    <span class="ml-2">NEXT</span>
                </a>
            {% endif %}
        </nav>

        {# Commenti #}
        {% if post.comments %}
            <div class="comments-section mt-12">
                <h2 class="text-2xl font-bold mb-6">{{ t.general.comments }}</h2>
                {% include 'components/comments.twig' with { comments: post.comments } %}
            </div>
        {% endif %}
    </article>
{% endblock %}